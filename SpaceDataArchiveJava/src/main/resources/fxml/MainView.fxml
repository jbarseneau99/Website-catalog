<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.spacedataarchive.controller.MainViewController"
            fx:id="mainBorderPane"
            prefHeight="800.0" prefWidth="1200.0" 
            styleClass="background">
    
    <top>
        <VBox>
            <MenuBar>
                <Menu text="File">
                    <MenuItem text="Preferences" onAction="#handlePreferences" />
                    <SeparatorMenuItem />
                    <MenuItem text="Exit" onAction="#handleExit" />
                </Menu>
                <Menu text="Help">
                    <MenuItem text="About" onAction="#handleAbout" />
                </Menu>
            </MenuBar>
            
            <HBox alignment="CENTER_LEFT" styleClass="app-header">
                <ImageView fx:id="logoImageView" fitHeight="36" fitWidth="36" preserveRatio="true" smooth="true" cache="true">
                    <image>
                        <Image url="@/images/33fg_Logo.png" />
                    </image>
                    <HBox.margin>
                        <Insets right="10.0" left="5.0" />
                    </HBox.margin>
                </ImageView>
                <Label text="Space Data Archive System" style="-fx-font-weight: bold; -fx-font-size: 16px;" />
                <Region HBox.hgrow="ALWAYS" />
                <ToggleButton fx:id="themeToggleButton" text="Light" style="-fx-font-size: 12px; -fx-padding: 4 12 4 12; -fx-cursor: hand;">
                    <graphic>
                        <ImageView fitHeight="14" fitWidth="14" preserveRatio="true">
                            <image>
                                <Image url="@/images/theme_icon.png" />
                            </image>
                        </ImageView>
                    </graphic>
                    <tooltip>
                        <Tooltip text="Toggle between Light and Dark themes" />
                    </tooltip>
                    <HBox.margin>
                        <Insets right="15.0" />
                    </HBox.margin>
                </ToggleButton>
                <Label text="Powered by JavaFX" style="-fx-font-style: italic; -fx-font-size: 12px; -fx-padding: 0 15px 0 0;" />
                <Label fx:id="statusLabel" text="Ready" style="-fx-font-weight: bold;" />
                <HBox.margin>
                    <Insets bottom="5.0" top="5.0" />
                </HBox.margin>
            </HBox>
        </VBox>
    </top>
    
    <center>
        <TabPane fx:id="mainTabPane" tabClosingPolicy="UNAVAILABLE">
            <Tab text="Site Map Creation">
                <fx:include source="tabs/SiteMapView.fxml" />
            </Tab>
            
            <Tab text="URL Validation">
                <fx:include source="tabs/URLValidationView.fxml" />
            </Tab>
            
            <Tab text="Logs &amp; Diagnostics">
                <VBox spacing="10" style="-fx-padding: 10px;" styleClass="background">
                    <Label text="Logs &amp; Diagnostics" style="-fx-font-size: 16px; -fx-font-weight: bold;" />
                    
                    <GridPane>
                        <columnConstraints>
                            <ColumnConstraints percentWidth="70" />
                            <ColumnConstraints percentWidth="30" />
                        </columnConstraints>
                        
                        <VBox spacing="5" GridPane.columnIndex="0">
                            <Label text="Application Logs" style="-fx-font-weight: bold;" />
                            <TextArea fx:id="logsTextArea" editable="false" VBox.vgrow="ALWAYS" />
                            
                            <HBox spacing="10">
                                <ComboBox fx:id="logLevelCombo" promptText="Log Level" />
                                <Button text="Clear Logs" onAction="#handleClearLogs" />
                                <Button text="Export Logs" onAction="#handleExportLogs" />
                            </HBox>
                        </VBox>
                        
                        <VBox spacing="5" GridPane.columnIndex="1">
                            <Label text="System Information" style="-fx-font-weight: bold;" />
                            <TextArea fx:id="systemInfoArea" editable="false" prefHeight="200" />
                            
                            <Label text="Performance Metrics" style="-fx-font-weight: bold;" />
                            <TableView fx:id="metricsTable" prefHeight="200">
                                <columns>
                                    <TableColumn fx:id="metricNameColumn" text="Metric" prefWidth="150" />
                                    <TableColumn fx:id="metricValueColumn" text="Value" prefWidth="100" />
                                </columns>
                            </TableView>
                        </VBox>
                    </GridPane>
                </VBox>
            </Tab>
            
            <Tab text="Operations Dashboard">
                <StackPane>
                    <fx:define>
                        <fx:include fx:id="operationsDashboard" source="../monitoring/OperationsDashboardView.fxml"/>
                    </fx:define>
                    <VBox alignment="CENTER">
                        <Label text="Operations Dashboard" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
                        <Label text="Monitor microservices and Kubernetes resources"/>
                        <Region VBox.vgrow="ALWAYS"/>
                        <StackPane fx:id="operationsDashboardContainer"/>
                    </VBox>
                </StackPane>
            </Tab>
            
            <Tab text="Data Extraction">
                <fx:include source="tabs/DataExtractionView.fxml" />
            </Tab>
            
            <Tab text="Analysis">
                <fx:include source="tabs/AnalysisView.fxml" />
            </Tab>
            
            <Tab text="Catalog Processing">
                <fx:include source="tabs/CatalogProcessingView.fxml" />
            </Tab>
            
            <Tab text="Search &amp; Access">
                <VBox spacing="10" style="-fx-padding: 10px;" styleClass="background">
                    <Label text="Search &amp; Access" style="-fx-font-size: 16px; -fx-font-weight: bold;" />
                    <Label text="Search and access archived data" />
                    
                    <!-- Search tab content will be implemented in Phase 3 -->
                    <Label text="Coming in phase 3" style="-fx-font-style: italic;" />
                </VBox>
            </Tab>
            
            <Tab text="Catalog">
                <VBox spacing="10" style="-fx-padding: 10px;" styleClass="background">
                    <Label text="Catalog" style="-fx-font-size: 16px; -fx-font-weight: bold;" />
                    <Label text="Browse the catalog of archived data" />
                    
                    <!-- Catalog tab content will be implemented in Phase 3 -->
                    <Label text="Coming in phase 3" style="-fx-font-style: italic;" />
                </VBox>
            </Tab>
            
            <Tab text="Intelligent Agents">
                <fx:include source="ai/AIAssistantView.fxml" />
            </Tab>
            
            <Tab text="AI Registry">
                <fx:include source="ai/AIRegistryView.fxml" />
            </Tab>
        </TabPane>
    </center>
    
    <bottom>
        <HBox alignment="CENTER_LEFT" styleClass="status-bar">
            <Label fx:id="statusBarLabel" text="Space Data Archive - Ready" style="-fx-font-weight: bold;" />
            <Region HBox.hgrow="ALWAYS" />
            <Label text="JavaFX UI v24.0.1" style="-fx-font-style: italic; -fx-font-size: 10px; -fx-opacity: 0.7;" />
            <Separator orientation="VERTICAL" visible="false" prefWidth="15" />
            <Label text="Apple Silicon Optimized" style="-fx-font-style: italic; -fx-font-size: 10px; -fx-opacity: 0.7;" />
            <Separator orientation="VERTICAL" visible="false" prefWidth="15" />
            <ProgressBar fx:id="statusProgressBar" progress="0.0" prefWidth="120" visible="false" />
            <padding>
                <Insets top="5.0" right="10.0" bottom="5.0" left="10.0" />
            </padding>
        </HBox>
    </bottom>
    
</BorderPane> 